
<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Relatório Final</title>
  <!-- Carrega o Chart.js a partir do CDN -->
  <script src='https://cdn.jsdelivr.net/npm/chart.js'></script>
  <style>
    body {
      background-color: #f9f9f9;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    /* Mosaico: container flex com quebra de linha */
    #chartsContainer {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .chart-container {
      width: calc(50% - 20px);
      border: 1px solid #ddd;
      padding: 10px;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
    }
    .chart-container h2 {
      text-align: center;
    }
    .info-box {
      margin-top: 10px;
      padding: 10px;
      background-color: #eee;
      border: 1px solid #ccc;
      display: none;
      white-space: pre-wrap; /* preserva as quebras de linha */
    }
  </style>
</head>
<body>
  <div id='chartsContainer'></div>
  <script>
    // Array de gráficos gerado no servidor
    var charts = [{"title": "M = 10 | R = 1,5", "labels": ["0", "0,1", "0,2", "0,3", "0,4", "0,5", "0,6", "0,7", "0,8", "0,9"], "data": [168, 154, 155, 148, 162, 150, 167, 158, 162, 168], "tooltips": ["NumberOfMachines: 10\nR: 1,5\nNumberOfTasks: 31\nVariance: 32\nOptimumMakeSpan: 149\nInstanceTotalMakeSpan: 168\nOptimumMinusMakeSpan: 19\nMaxTime: 2\nMinTime: 0\nAvgTime: 0", "NumberOfMachines: 10\nR: 1,5\nAlpha: 0,1\nNumberOfTasks: 31\nVariance: 11\nOptimumMakeSpan: 149\nInstanceTotalMakeSpan: 154\nOptimumMinusMakeSpan: 5\nMaxTime: 36\nMinTime: 16\nAvgTime: 27", "NumberOfMachines: 10\nR: 1,5\nAlpha: 0,2\nNumberOfTasks: 31\nVariance: 9\nOptimumMakeSpan: 150\nInstanceTotalMakeSpan: 155\nOptimumMinusMakeSpan: 4\nMaxTime: 44\nMinTime: 24\nAvgTime: 35", "NumberOfMachines: 10\nR: 1,5\nAlpha: 0,3\nNumberOfTasks: 31\nVariance: 9\nOptimumMakeSpan: 143\nInstanceTotalMakeSpan: 148\nOptimumMinusMakeSpan: 4\nMaxTime: 79\nMinTime: 30\nAvgTime: 46", "NumberOfMachines: 10\nR: 1,5\nAlpha: 0,4\nNumberOfTasks: 31\nVariance: 12\nOptimumMakeSpan: 157\nInstanceTotalMakeSpan: 162\nOptimumMinusMakeSpan: 5\nMaxTime: 75\nMinTime: 34\nAvgTime: 47", "NumberOfMachines: 10\nR: 1,5\nAlpha: 0,5\nNumberOfTasks: 31\nVariance: 10\nOptimumMakeSpan: 145\nInstanceTotalMakeSpan: 150\nOptimumMinusMakeSpan: 4\nMaxTime: 65\nMinTime: 38\nAvgTime: 50", "NumberOfMachines: 10\nR: 1,5\nAlpha: 0,6\nNumberOfTasks: 31\nVariance: 14\nOptimumMakeSpan: 162\nInstanceTotalMakeSpan: 167\nOptimumMinusMakeSpan: 5\nMaxTime: 105\nMinTime: 35\nAvgTime: 59", "NumberOfMachines: 10\nR: 1,5\nAlpha: 0,7\nNumberOfTasks: 31\nVariance: 10\nOptimumMakeSpan: 154\nInstanceTotalMakeSpan: 158\nOptimumMinusMakeSpan: 4\nMaxTime: 75\nMinTime: 39\nAvgTime: 57", "NumberOfMachines: 10\nR: 1,5\nAlpha: 0,8\nNumberOfTasks: 31\nVariance: 12\nOptimumMakeSpan: 157\nInstanceTotalMakeSpan: 162\nOptimumMinusMakeSpan: 5\nMaxTime: 73\nMinTime: 40\nAvgTime: 54", "NumberOfMachines: 10\nR: 1,5\nAlpha: 0,9\nNumberOfTasks: 31\nVariance: 12\nOptimumMakeSpan: 162\nInstanceTotalMakeSpan: 168\nOptimumMinusMakeSpan: 5\nMaxTime: 158\nMinTime: 41\nAvgTime: 73"]}, {"title": "M = 10 | R = 2", "labels": ["0", "0,1", "0,2", "0,3", "0,4", "0,5", "0,6", "0,7", "0,8", "0,9"], "data": [507, 494, 504, 493, 512, 510, 505, 512, 493, 484], "tooltips": ["NumberOfMachines: 10\nR: 2\nNumberOfTasks: 100\nVariance: 30\nOptimumMakeSpan: 496\nInstanceTotalMakeSpan: 507\nOptimumMinusMakeSpan: 10\nMaxTime: 2\nMinTime: 1\nAvgTime: 1", "NumberOfMachines: 10\nR: 2\nAlpha: 0,1\nNumberOfTasks: 100\nVariance: 4\nOptimumMakeSpan: 492\nInstanceTotalMakeSpan: 494\nOptimumMinusMakeSpan: 2\nMaxTime: 149\nMinTime: 74\nAvgTime: 103", "NumberOfMachines: 10\nR: 2\nAlpha: 0,2\nNumberOfTasks: 100\nVariance: 4\nOptimumMakeSpan: 501\nInstanceTotalMakeSpan: 504\nOptimumMinusMakeSpan: 2\nMaxTime: 172\nMinTime: 98\nAvgTime: 126", "NumberOfMachines: 10\nR: 2\nAlpha: 0,3\nNumberOfTasks: 100\nVariance: 3\nOptimumMakeSpan: 491\nInstanceTotalMakeSpan: 493\nOptimumMinusMakeSpan: 2\nMaxTime: 219\nMinTime: 115\nAvgTime: 154", "NumberOfMachines: 10\nR: 2\nAlpha: 0,4\nNumberOfTasks: 100\nVariance: 3\nOptimumMakeSpan: 510\nInstanceTotalMakeSpan: 512\nOptimumMinusMakeSpan: 2\nMaxTime: 301\nMinTime: 108\nAvgTime: 161", "NumberOfMachines: 10\nR: 2\nAlpha: 0,5\nNumberOfTasks: 100\nVariance: 3\nOptimumMakeSpan: 508\nInstanceTotalMakeSpan: 510\nOptimumMinusMakeSpan: 2\nMaxTime: 221\nMinTime: 120\nAvgTime: 163", "NumberOfMachines: 10\nR: 2\nAlpha: 0,6\nNumberOfTasks: 100\nVariance: 3\nOptimumMakeSpan: 503\nInstanceTotalMakeSpan: 505\nOptimumMinusMakeSpan: 1\nMaxTime: 292\nMinTime: 143\nAvgTime: 181", "NumberOfMachines: 10\nR: 2\nAlpha: 0,7\nNumberOfTasks: 100\nVariance: 3\nOptimumMakeSpan: 511\nInstanceTotalMakeSpan: 512\nOptimumMinusMakeSpan: 1\nMaxTime: 257\nMinTime: 143\nAvgTime: 190", "NumberOfMachines: 10\nR: 2\nAlpha: 0,8\nNumberOfTasks: 100\nVariance: 3\nOptimumMakeSpan: 491\nInstanceTotalMakeSpan: 493\nOptimumMinusMakeSpan: 2\nMaxTime: 251\nMinTime: 164\nAvgTime: 193", "NumberOfMachines: 10\nR: 2\nAlpha: 0,9\nNumberOfTasks: 100\nVariance: 4\nOptimumMakeSpan: 482\nInstanceTotalMakeSpan: 484\nOptimumMinusMakeSpan: 1\nMaxTime: 233\nMinTime: 168\nAvgTime: 199"]}, {"title": "M = 20 | R = 1,5", "labels": ["0", "0,1", "0,2", "0,3", "0,4", "0,5", "0,6", "0,7", "0,8", "0,9"], "data": [237, 221, 228, 226, 233, 235, 231, 232, 230, 221], "tooltips": ["NumberOfMachines: 20\nR: 1,5\nNumberOfTasks: 89\nVariance: 27\nOptimumMakeSpan: 227\nInstanceTotalMakeSpan: 237\nOptimumMinusMakeSpan: 10\nMaxTime: 2\nMinTime: 1\nAvgTime: 1", "NumberOfMachines: 20\nR: 1,5\nAlpha: 0,1\nNumberOfTasks: 89\nVariance: 13\nOptimumMakeSpan: 215\nInstanceTotalMakeSpan: 221\nOptimumMinusMakeSpan: 6\nMaxTime: 169\nMinTime: 76\nAvgTime: 106", "NumberOfMachines: 20\nR: 1,5\nAlpha: 0,2\nNumberOfTasks: 89\nVariance: 15\nOptimumMakeSpan: 221\nInstanceTotalMakeSpan: 228\nOptimumMinusMakeSpan: 6\nMaxTime: 225\nMinTime: 85\nAvgTime: 160", "NumberOfMachines: 20\nR: 1,5\nAlpha: 0,3\nNumberOfTasks: 89\nVariance: 14\nOptimumMakeSpan: 219\nInstanceTotalMakeSpan: 226\nOptimumMinusMakeSpan: 7\nMaxTime: 260\nMinTime: 115\nAvgTime: 163", "NumberOfMachines: 20\nR: 1,5\nAlpha: 0,4\nNumberOfTasks: 89\nVariance: 16\nOptimumMakeSpan: 226\nInstanceTotalMakeSpan: 233\nOptimumMinusMakeSpan: 7\nMaxTime: 306\nMinTime: 117\nAvgTime: 190", "NumberOfMachines: 20\nR: 1,5\nAlpha: 0,5\nNumberOfTasks: 89\nVariance: 19\nOptimumMakeSpan: 227\nInstanceTotalMakeSpan: 235\nOptimumMinusMakeSpan: 8\nMaxTime: 260\nMinTime: 129\nAvgTime: 176", "NumberOfMachines: 20\nR: 1,5\nAlpha: 0,6\nNumberOfTasks: 89\nVariance: 17\nOptimumMakeSpan: 224\nInstanceTotalMakeSpan: 231\nOptimumMinusMakeSpan: 7\nMaxTime: 372\nMinTime: 139\nAvgTime: 220", "NumberOfMachines: 20\nR: 1,5\nAlpha: 0,7\nNumberOfTasks: 89\nVariance: 16\nOptimumMakeSpan: 224\nInstanceTotalMakeSpan: 232\nOptimumMinusMakeSpan: 7\nMaxTime: 414\nMinTime: 173\nAvgTime: 249", "NumberOfMachines: 20\nR: 1,5\nAlpha: 0,8\nNumberOfTasks: 89\nVariance: 17\nOptimumMakeSpan: 222\nInstanceTotalMakeSpan: 230\nOptimumMinusMakeSpan: 8\nMaxTime: 353\nMinTime: 188\nAvgTime: 261", "NumberOfMachines: 20\nR: 1,5\nAlpha: 0,9\nNumberOfTasks: 89\nVariance: 16\nOptimumMakeSpan: 213\nInstanceTotalMakeSpan: 221\nOptimumMinusMakeSpan: 7\nMaxTime: 562\nMinTime: 185\nAvgTime: 321"]}, {"title": "M = 20 | R = 2", "labels": ["0", "0,1", "0,2", "0,3", "0,4", "0,5", "0,6", "0,7", "0,8", "0,9"], "data": [1014, 1009, 1003, 994, 1022, 996, 1012, 995, 1019, 1004], "tooltips": ["NumberOfMachines: 20\nR: 2\nNumberOfTasks: 400\nVariance: 23\nOptimumMakeSpan: 999\nInstanceTotalMakeSpan: 1014\nOptimumMinusMakeSpan: 15\nMaxTime: 27\nMinTime: 17\nAvgTime: 25", "NumberOfMachines: 20\nR: 2\nAlpha: 0,1\nNumberOfTasks: 400\nVariance: 5\nOptimumMakeSpan: 1006\nInstanceTotalMakeSpan: 1009\nOptimumMinusMakeSpan: 2\nMaxTime: 791\nMinTime: 109\nAvgTime: 611", "NumberOfMachines: 20\nR: 2\nAlpha: 0,2\nNumberOfTasks: 400\nVariance: 5\nOptimumMakeSpan: 1000\nInstanceTotalMakeSpan: 1003\nOptimumMinusMakeSpan: 2\nMaxTime: 895\nMinTime: 348\nAvgTime: 705", "NumberOfMachines: 20\nR: 2\nAlpha: 0,3\nNumberOfTasks: 400\nVariance: 3\nOptimumMakeSpan: 992\nInstanceTotalMakeSpan: 994\nOptimumMinusMakeSpan: 2\nMaxTime: 904\nMinTime: 77\nAvgTime: 504", "NumberOfMachines: 20\nR: 2\nAlpha: 0,4\nNumberOfTasks: 400\nVariance: 4\nOptimumMakeSpan: 1020\nInstanceTotalMakeSpan: 1022\nOptimumMinusMakeSpan: 2\nMaxTime: 942\nMinTime: 74\nAvgTime: 476", "NumberOfMachines: 20\nR: 2\nAlpha: 0,5\nNumberOfTasks: 400\nVariance: 5\nOptimumMakeSpan: 993\nInstanceTotalMakeSpan: 996\nOptimumMinusMakeSpan: 2\nMaxTime: 969\nMinTime: 16\nAvgTime: 397", "NumberOfMachines: 20\nR: 2\nAlpha: 0,6\nNumberOfTasks: 400\nVariance: 4\nOptimumMakeSpan: 1010\nInstanceTotalMakeSpan: 1012\nOptimumMinusMakeSpan: 2\nMaxTime: 996\nMinTime: 40\nAvgTime: 371", "NumberOfMachines: 20\nR: 2\nAlpha: 0,7\nNumberOfTasks: 400\nVariance: 4\nOptimumMakeSpan: 993\nInstanceTotalMakeSpan: 995\nOptimumMinusMakeSpan: 2\nMaxTime: 876\nMinTime: 10\nAvgTime: 276", "NumberOfMachines: 20\nR: 2\nAlpha: 0,8\nNumberOfTasks: 400\nVariance: 4\nOptimumMakeSpan: 1017\nInstanceTotalMakeSpan: 1019\nOptimumMinusMakeSpan: 2\nMaxTime: 962\nMinTime: 64\nAvgTime: 430", "NumberOfMachines: 20\nR: 2\nAlpha: 0,9\nNumberOfTasks: 400\nVariance: 5\nOptimumMakeSpan: 1001\nInstanceTotalMakeSpan: 1004\nOptimumMinusMakeSpan: 2\nMaxTime: 827\nMinTime: 183\nAvgTime: 488"]}, {"title": "M = 50 | R = 1,5", "labels": ["0", "0,1", "0,2", "0,3", "0,4", "0,5", "0,6", "0,7", "0,8", "0,9"], "data": [363, 359, 358, 358, 360, 363, 361, 362, 359, 357], "tooltips": ["NumberOfMachines: 50\nR: 1,5\nNumberOfTasks: 353\nVariance: 15\nOptimumMakeSpan: 352\nInstanceTotalMakeSpan: 363\nOptimumMinusMakeSpan: 10\nMaxTime: 11\nMinTime: 8\nAvgTime: 10", "NumberOfMachines: 50\nR: 1,5\nAlpha: 0,1\nNumberOfTasks: 353\nVariance: 17\nOptimumMakeSpan: 350\nInstanceTotalMakeSpan: 359\nOptimumMinusMakeSpan: 9\nMaxTime: 946\nMinTime: 184\nAvgTime: 598", "NumberOfMachines: 50\nR: 1,5\nAlpha: 0,2\nNumberOfTasks: 353\nVariance: 16\nOptimumMakeSpan: 349\nInstanceTotalMakeSpan: 358\nOptimumMinusMakeSpan: 9\nMaxTime: 984\nMinTime: 277\nAvgTime: 670", "NumberOfMachines: 50\nR: 1,5\nAlpha: 0,3\nNumberOfTasks: 353\nVariance: 17\nOptimumMakeSpan: 349\nInstanceTotalMakeSpan: 358\nOptimumMinusMakeSpan: 9\nMaxTime: 976\nMinTime: 5\nAvgTime: 564", "NumberOfMachines: 50\nR: 1,5\nAlpha: 0,4\nNumberOfTasks: 353\nVariance: 16\nOptimumMakeSpan: 351\nInstanceTotalMakeSpan: 360\nOptimumMinusMakeSpan: 8\nMaxTime: 985\nMinTime: 28\nAvgTime: 484", "NumberOfMachines: 50\nR: 1,5\nAlpha: 0,5\nNumberOfTasks: 353\nVariance: 17\nOptimumMakeSpan: 354\nInstanceTotalMakeSpan: 363\nOptimumMinusMakeSpan: 9\nMaxTime: 934\nMinTime: 96\nAvgTime: 313", "NumberOfMachines: 50\nR: 1,5\nAlpha: 0,6\nNumberOfTasks: 353\nVariance: 18\nOptimumMakeSpan: 352\nInstanceTotalMakeSpan: 361\nOptimumMinusMakeSpan: 9\nMaxTime: 801\nMinTime: 187\nAvgTime: 455", "NumberOfMachines: 50\nR: 1,5\nAlpha: 0,7\nNumberOfTasks: 353\nVariance: 16\nOptimumMakeSpan: 353\nInstanceTotalMakeSpan: 362\nOptimumMinusMakeSpan: 9\nMaxTime: 894\nMinTime: 5\nAvgTime: 411", "NumberOfMachines: 50\nR: 1,5\nAlpha: 0,8\nNumberOfTasks: 353\nVariance: 17\nOptimumMakeSpan: 350\nInstanceTotalMakeSpan: 359\nOptimumMinusMakeSpan: 9\nMaxTime: 803\nMinTime: 65\nAvgTime: 414", "NumberOfMachines: 50\nR: 1,5\nAlpha: 0,9\nNumberOfTasks: 353\nVariance: 16\nOptimumMakeSpan: 347\nInstanceTotalMakeSpan: 357\nOptimumMinusMakeSpan: 9\nMaxTime: 844\nMinTime: 176\nAvgTime: 529"]}, {"title": "M = 50 | R = 2", "labels": ["0", "0,1", "0,2", "0,3", "0,4", "0,5", "0,6", "0,7", "0,8", "0,9"], "data": [2510, 2499, 2515, 2499, 2519, 2516, 2502, 2498, 2502, 2487], "tooltips": ["NumberOfMachines: 50\nR: 2\nNumberOfTasks: 2500\nVariance: 12\nOptimumMakeSpan: 2501\nInstanceTotalMakeSpan: 2510\nOptimumMinusMakeSpan: 8\nMaxTime: 187\nMinTime: 182\nAvgTime: 183", "NumberOfMachines: 50\nR: 2\nAlpha: 0,1\nNumberOfTasks: 2500\nVariance: 7\nOptimumMakeSpan: 2495\nInstanceTotalMakeSpan: 2499\nOptimumMinusMakeSpan: 3\nMaxTime: 961\nMinTime: 6\nAvgTime: 530", "NumberOfMachines: 50\nR: 2\nAlpha: 0,2\nNumberOfTasks: 2500\nVariance: 7\nOptimumMakeSpan: 2513\nInstanceTotalMakeSpan: 2515\nOptimumMinusMakeSpan: 2\nMaxTime: 998\nMinTime: 63\nAvgTime: 619", "NumberOfMachines: 50\nR: 2\nAlpha: 0,3\nNumberOfTasks: 2500\nVariance: 11\nOptimumMakeSpan: 2495\nInstanceTotalMakeSpan: 2499\nOptimumMinusMakeSpan: 3\nMaxTime: 941\nMinTime: 5\nAvgTime: 607", "NumberOfMachines: 50\nR: 2\nAlpha: 0,4\nNumberOfTasks: 2500\nVariance: 6\nOptimumMakeSpan: 2516\nInstanceTotalMakeSpan: 2519\nOptimumMinusMakeSpan: 2\nMaxTime: 927\nMinTime: 21\nAvgTime: 519", "NumberOfMachines: 50\nR: 2\nAlpha: 0,5\nNumberOfTasks: 2500\nVariance: 11\nOptimumMakeSpan: 2513\nInstanceTotalMakeSpan: 2516\nOptimumMinusMakeSpan: 2\nMaxTime: 977\nMinTime: 53\nAvgTime: 366", "NumberOfMachines: 50\nR: 2\nAlpha: 0,6\nNumberOfTasks: 2500\nVariance: 7\nOptimumMakeSpan: 2499\nInstanceTotalMakeSpan: 2502\nOptimumMinusMakeSpan: 2\nMaxTime: 987\nMinTime: 98\nAvgTime: 576", "NumberOfMachines: 50\nR: 2\nAlpha: 0,7\nNumberOfTasks: 2500\nVariance: 7\nOptimumMakeSpan: 2495\nInstanceTotalMakeSpan: 2498\nOptimumMinusMakeSpan: 2\nMaxTime: 934\nMinTime: 71\nAvgTime: 375", "NumberOfMachines: 50\nR: 2\nAlpha: 0,8\nNumberOfTasks: 2500\nVariance: 9\nOptimumMakeSpan: 2499\nInstanceTotalMakeSpan: 2502\nOptimumMinusMakeSpan: 3\nMaxTime: 833\nMinTime: 146\nAvgTime: 513", "NumberOfMachines: 50\nR: 2\nAlpha: 0,9\nNumberOfTasks: 2500\nVariance: 8\nOptimumMakeSpan: 2484\nInstanceTotalMakeSpan: 2487\nOptimumMinusMakeSpan: 2\nMaxTime: 985\nMinTime: 45\nAvgTime: 422"]}];

    var container = document.getElementById('chartsContainer');
    charts.forEach(function(chart, index) {
         // Cria um elemento div para cada gráfico
         var div = document.createElement('div');
         div.className = 'chart-container';

         // Cria o título do gráfico
         var title = document.createElement('h2');
         title.textContent = chart.title;
         div.appendChild(title);

         // Cria o canvas para o gráfico
         var canvas = document.createElement('canvas');
         canvas.id = 'chart_' + index;
         canvas.width = 600;
         canvas.height = 400;
         div.appendChild(canvas);

         // Cria a div que exibirá os detalhes ao clicar na barra
         var infoBox = document.createElement('div');
         infoBox.id = 'infoBox_' + index;
         infoBox.className = 'info-box';
         div.appendChild(infoBox);

         container.appendChild(div);

         // Calcula as cores: a barra com o menor valor em chart.data ficará em vermelho
         var minVal = Math.min.apply(null, chart.data);
         var backgroundColors = chart.data.map(function(val) {
              return (val === minVal) ? 'rgba(255, 99, 132, 0.2)' : 'rgba(54, 162, 235, 0.2)';
         });
         var borderColors = chart.data.map(function(val) {
              return (val === minVal) ? 'rgba(255, 99, 132, 1)' : 'rgba(54, 162, 235, 1)';
         });

         // Cria o gráfico de barras com Chart.js e define um callback para o clique
         var ctx = canvas.getContext('2d');
         var myChart = new Chart(ctx, {
              type: 'bar',
              data: {
                  labels: chart.labels,
                  datasets: [{
                      label: 'Instance Total MakeSpan',
                      data: chart.data,
                      backgroundColor: backgroundColors,
                      borderColor: borderColors,
                      borderWidth: 1
                  }]
              },
              options: {
                  scales: {
                      y: {
                          beginAtZero: true
                      }
                  },
                  onClick: function(evt, activeElements) {
                      if(activeElements.length > 0) {
                          var idx = activeElements[0].index;
                          var info = chart.tooltips[idx];
                          // Atualiza e exibe a info box com as informações detalhadas
                          var infoBox = document.getElementById('infoBox_' + index);
                          infoBox.innerHTML = info.replace(/\\n/g, '<br>');
                          infoBox.style.display = 'block';
                      }
                  },
                  plugins: {
                      tooltip: {
                          enabled: false // Desabilita o tooltip padrão
                      }
                  }
              }
         });
    });
  </script>
</body>
</html>
